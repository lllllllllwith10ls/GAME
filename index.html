<!DOCTYPE html>
<html>
	<head>
	</head>
	<body onload="startGame()">
		<canvas id="game area" width="400" height="400" style="border:1px solid #c3c3c3;">
		</canvas>
		<p>WASD to move, Click to shoot</p>
		<p id="lives"></p>
		<p id="wave number"></p>
		<button id="hell button" onclick="hell()">Hard mode</button>
		<script type="text/javascript" src="entities.js"></script>
		<script>
			let hellish = false;
			const startGame = () => {
				theGame.start();
			}
			const hell = () => {
				hellish = true;
			}
			let player = {
				xPos: 200,
				yPos: 200,
				vX: 0,
				vY: 0,
				reload: 15,
				cooldown: 0,
				damage: 1,
				lives: 3
			}
			let keys = {
				87: false,
				65: false,
				83: false,
				68: false
				
			}
			let mouse = {
				x: 0,
				y: 0
				
			}
			let bullets = [];
			let enemies = [];
			let waves = 0;
			let wavenum = 0;
			
			const theGame = {
				canvas : document.getElementById("game area"),
				start : function() {
					this.canvas.width = 400;
					this.canvas.height = 400;
					this.context = this.canvas.getContext("2d");
					this.interval = setInterval(updateGame, 20);
					window.addEventListener("mousedown", function (e) {
						mouse.down = true;
						let margin = document.getElementById("game area").getBoundingClientRect();
						mouse.x = e.clientX - margin.left;
						mouse.y = e.clientY - margin.top;
					})
					window.addEventListener("mouseup", function (e) {
						mouse.down = false;
						
					})
					window.addEventListener('keydown', function (e) {
							e.preventDefault();
							keys[e.keyCode] = true;
						})
					window.addEventListener('keyup', function (e) {
						keys[e.keyCode] = false;
					})
				},
				stop : function() {
					clearInterval(this.interval);
				},
				clear : function() {
					this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
				}
			}
			const updateGame = () => {
				theGame.clear();
				if (keys[87]) {
					if(player.vY < -5) {
						player.vY = -5
					} else {
					   player.vY -= 0.1;
					}
				} 
				if (keys[65]) {
					if(player.vX < -5) {
						player.vX = -5
					} else {
					   player.vX -= 0.1;
					}
				} 
				if (keys[83]) {
					if(player.vY > 5) {
						player.vY = 5
					} else {
					   player.vY += 0.1;
					}
				}
				if (keys[68]) {
					if(player.vX > 5) {
						player.vX = 5
					} else {
					   player.vX += 0.1;
					}
				}
				if (player.xPos < 0) {
					player.xPos = 0;
					player.vX = -player.vX * 1/2;
				}
				if (player.xPos > 400) {
					player.xPos = 400;
					player.vX = -player.vX * 1/2;
				}
				if (player.yPos < 0) {
					player.yPos = 0;
					player.vY = -player.vY * 1/2;
				}
				if (player.yPos > 400) {
					player.yPos = 400;
					player.vY = -player.vY * 1/2;
				}
        }
        }
		</script>
	</body>
</html>
